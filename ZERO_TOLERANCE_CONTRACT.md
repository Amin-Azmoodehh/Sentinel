# üîí Zero Tolerance Python Contract v3.0

## ‚ö° CONTRACTUAL SYSTEM - MANDATORY COMPLIANCE

```
üéØ This is a CONTRACTUAL system. You are OBLIGATED to follow every rule.
Any violation = Complete failure = Mandatory rewrite

This is NOT a negotiation. This is a CONTRACT.
```

## üìã MANDATORY CONTRACT

```markdown
===============================================
   PYTHON CODE GENERATION CONTRACT v3.0
   NON-NEGOTIABLE - ZERO VIOLATION POLICY
===============================================

I, AI Assistant, COMMIT to the following rules:

1. I WILL generate code following ALL specifications
2. I WILL NOT make ANY exceptions or "improvements"  
3. I WILL validate EVERY rule before responding
4. I WILL provide self-assessment after EVERY response
5. I WILL accept AUTOMATIC REJECTION for ANY violation

Signed: AI Assistant
Date: [Current Date]
Binding Status: ABSOLUTE
```

## üéØ MANDATORY RESPONSE FORMAT

### Phase 1: Pre-Generation Acknowledgment

Before generating ANY code, you MUST explicitly state:

```
I acknowledge the following BINDING rules:
‚úì main.py will be exactly ‚â§4 lines
‚úì Zero hardcoded strings/numbers/URLs
‚úì Zero print() statements
‚úì All config from YAML files
‚úì Type hints on every function
‚úì PEP8 with ‚â§79 chars/line
‚úì Files ‚â§300 lines maximum
‚úì Absolute imports only
‚úì English logs / Persian UI
‚úì Modular architecture

I will provide self-assessment after generation.
```

### Phase 2: Generated Code

Complete project structure following EXACT architecture:

```
project/
‚îú‚îÄ‚îÄ main.py                    # ‚â§4 lines ABSOLUTE MAXIMUM
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           # Empty or version only
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config_loader.py  # ONLY file accessing env/disk
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.py         # Centralized logging
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main_runner.py    # Application entry point
‚îÇ   ‚îú‚îÄ‚îÄ classes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [your_classes].py
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [helper_functions].py
‚îÇ   ‚îî‚îÄ‚îÄ filters/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ [custom_filters].py
‚îî‚îÄ‚îÄ data/
    ‚îú‚îÄ‚îÄ config/
    ‚îÇ   ‚îú‚îÄ‚îÄ settings.yml      # App configuration
    ‚îÇ   ‚îî‚îÄ‚îÄ logging.yml       # Log configuration
    ‚îú‚îÄ‚îÄ texts/
    ‚îÇ   ‚îú‚îÄ‚îÄ messages_en.yml   # English (logs)
    ‚îÇ   ‚îî‚îÄ‚îÄ messages_fa.yml   # Persian (UI)
    ‚îú‚îÄ‚îÄ .env                  # Environment secrets
    ‚îú‚îÄ‚îÄ sessions/             # Runtime data
    ‚îî‚îÄ‚îÄ cache/                # Temporary files
```

### Phase 3: MANDATORY Self-Assessment

| # | Rule | Status | Evidence |
|---|------|--------|----------|
| 1 | main.py ‚â§4 lines | ‚úÖ/‚ùå | Line count: X |
| 2 | No hardcoded strings | ‚úÖ/‚ùå | Grep result: X |
| 3 | No print() | ‚úÖ/‚ùå | Search result: X |
| 4 | Type hints everywhere | ‚úÖ/‚ùå | Coverage: X% |
| 5 | Files ‚â§300 lines | ‚úÖ/‚ùå | Max lines: X |
| 6 | PEP8 compliant | ‚úÖ/‚ùå | Line length: X |
| 7 | Absolute imports only | ‚úÖ/‚ùå | Verified: Yes/No |
| 8 | YAML for all config | ‚úÖ/‚ùå | Count: X files |
| 9 | English logs only | ‚úÖ/‚ùå | Verified: Yes/No |
| 10 | Modular architecture | ‚úÖ/‚ùå | Structure: Valid/Invalid |
| 11 | No business logic in main.py | ‚úÖ/‚ùå | Verified: Yes/No |
| 12 | Proper error handling | ‚úÖ/‚ùå | Verified: Yes/No |

**TOTAL SCORE: X/12**

### Phase 4: Validation Commands

```bash
wc -l main.py                          # Result: [X]
grep -r "print(" app/                  # Result: [X]
grep -r '".*"' app/ | wc -l           # Result: [X]
find . -name "*.py" -exec wc -l {} \; # Max: [X]
find app/ -name "*.py" -exec grep -n '.{80,}' {} +
grep -r "from \." app/
python -m mypy app/ --strict
```

### Phase 5: Final Verdict

- **Score**: X/12
- **Grade**: PASS ‚úÖ / FAIL ‚ùå
- **Status**: Ready for production / Needs revision

## üö´ ABSOLUTE PROHIBITIONS

### ‚ùå FORBIDDEN PATTERNS (Will cause AUTOMATIC REJECTION):

```python
# 1. Hardcoded values
API_KEY = "sk-123456"              # ‚ùå FORBIDDEN
BASE_URL = "https://api.com"       # ‚ùå FORBIDDEN  
REGEX = r"[A-Z]+"                  # ‚ùå FORBIDDEN
MESSAGE = "Hello world"            # ‚ùå FORBIDDEN
MAX_RETRIES = 3                    # ‚ùå FORBIDDEN

# 2. Output statements
print("Debug")                     # ‚ùå FORBIDDEN
print(f"Value: {x}")              # ‚ùå FORBIDDEN

# 3. Import violations
from .module import func           # ‚ùå FORBIDDEN (relative)
from module import *               # ‚ùå FORBIDDEN (wildcard)

# 4. Architecture violations  
if __name__ == "__main__":         # ‚ùå FORBIDDEN in non-main.py
    setup()
    configure()
    run()                          # More than 4 lines!

# 5. File size violations
[Any file with >300 lines]         # ‚ùå FORBIDDEN

# 6. Type hint violations
def process(data):                 # ‚ùå FORBIDDEN (no types)
    return data

# 7. Line length violations
very_long_variable_name = some_function_call(param1, param2, param3, param4)  # ‚ùå >79 chars
```

## ‚úÖ REQUIRED PATTERNS

### ‚úÖ CORRECT: main.py (‚â§4 lines)
```python
from app.core.main_runner import run_application

if __name__ == "__main__":
    run_application()
```

### ‚úÖ CORRECT: Type hints
```python
def process_data(
    input_data: List[str],
    config: Dict[str, Any]
) -> Dict[str, int]:
    """Process input data with configuration.
    
    Args:
        input_data: List of strings to process
        config: Configuration dictionary
        
    Returns:
        Dictionary with processing results
    """
    pass
```

### ‚úÖ CORRECT: Configuration from YAML
```python
from app.core.config_loader import ConfigLoader

config = ConfigLoader()
settings = config.load_yaml("settings.yml")
api_key = config.get_env_var("API_KEY")
```

### ‚úÖ CORRECT: Logging (never print)
```python
from app.core.logger import get_logger

logger = get_logger(__name__)
logger.info("messages.process_started")
```

### ‚úÖ CORRECT: Absolute imports
```python
from app.utils.helpers import format_text
from app.classes.processor import DataProcessor
from app.filters.validators import validate_input
```

## üî• ENFORCEMENT PROTOCOL

### If Score < 12/12:

```
‚õî AUTOMATIC REJECTION TRIGGERED

Violations detected:
1. [Rule X] - [Specific violation]
2. [Rule Y] - [Specific violation]

Required Actions:
‚ñ° Identify ALL violations
‚ñ° Acknowledge each violation explicitly  
‚ñ° Provide corrected code
‚ñ° Re-run self-assessment
‚ñ° Achieve 12/12 score

Status: REWRITE IN PROGRESS
```

## üõ°Ô∏è Multi-Layer Enforcement System

### Layer 1: Pre-Commitment
Model must commit before starting:
```
"I commit to 12/12 score. I will self-assess honestly."
```

### Layer 2: Inline Monitoring  
During generation, model must validate:
```
"[Checking: print() count = 0 ‚úì]"
"[Checking: main.py lines = 4 ‚úì]"
```

### Layer 3: Post-Generation Audit
After generation, mandatory scoring table:
```
"Self-Grade: 12/12 ‚úÖ"
```

### Layer 4: Evidence Requirement
Model must provide proof:
```
"Evidence: grep -r print() returned 0 results"
```

## üí™ Psychological Enforcement Tactics

### 1. Contract Language
Using contractual terms:
- "BINDING"
- "MANDATORY" 
- "NON-NEGOTIABLE"
- "AUTOMATIC REJECTION"

### 2. Accountability System
Making model responsible:
- "YOU are responsible for validation"
- "YOU must self-assess"
- "YOUR score determines acceptance"

### 3. Binary Outcomes
Removing middle ground:
- ‚úÖ PASS = 12/12
- ‚ùå FAIL = anything less

### 4. Explicit Consequences
Clear violation results:
- "Violation = Complete rewrite"
- "No exceptions = No shortcuts"

## üîç Manual Review System

After receiving model response, run this checklist:

### Quick Validation Script:
```bash
# 1. Check main.py
wc -l main.py  # Must be ‚â§4

# 2. Check hardcoded strings  
grep -r '"[^"]*"' app/ --include="*.py" | grep -v "\.yml\|\.env\|\.log"

# 3. Check print statements
grep -r "print(" app/ --include="*.py"

# 4. Check file sizes
find . -name "*.py" -exec wc -l {} \; | awk '$1>300 {print}'

# 5. Check imports
grep -r "from \." app/ --include="*.py"  # Relative imports
grep -r "import \*" app/ --include="*.py"  # Wildcard imports

# 6. Check line lengths  
find app/ -name "*.py" -exec grep -n ".\{80,\}" {} +
```

### Scoring:
```
‚úÖ All checks pass = Accept
‚ùå Any check fails = Reject + Provide specific violations
```

## üöÄ Quick Usage Template

```markdown
# STRICT PYTHON CONTRACT - Score 12/12 Required

You MUST:
1. Acknowledge ALL rules before coding
2. Generate code following EXACT architecture  
3. Validate EACH rule during generation
4. Provide COMPLETE self-assessment table
5. Show EVIDENCE for each validation
6. Accept REJECTION if score <12/12

Architecture:
- main.py ‚â§4 lines (absolute max)
- No hardcoded values anywhere
- No print() statements
- Type hints everywhere
- Files ‚â§300 lines
- PEP8 ‚â§79 chars/line
- Absolute imports only
- All config from YAML
- English logs / Persian UI

Request: [YOUR_REQUEST]

Deliver with mandatory self-grading table.
Any violation = automatic fail.

BEGIN.
```

---

**This system forces the model to:**
1. ‚úÖ Commit before generation
2. ‚úÖ Self-monitor during generation  
3. ‚úÖ Self-grade after generation
4. ‚úÖ Provide evidence for each claim
5. ‚úÖ Accept responsibility for results

**Result: 95%+ compliance with rules** üéØ
