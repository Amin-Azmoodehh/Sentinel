{
  "$schema": "https://json-schema.org/draft-07/schema",
  "version": "1.6.0",
  "contract": {
    "version": "3.0",
    "name": "Zero Tolerance Python Contract",
    "enforcement": "MANDATORY"
  },
  "entrypoint": {
    "filename": "main.py",
    "maxLines": 4,
    "mustImportOnly": true,
    "noLogic": true,
    "noSideEffects": true
  },
  "style": {
    "maxLineLength": 79,
    "pep8Compliant": true,
    "noSideEffectsOnImport": true,
    "absoluteImportsOnly": true,
    "noRelativeImports": true,
    "noWildcardImports": true
  },
  "typing": {
    "typeHintsRequired": true,
    "typeHintsCoverage": 100,
    "enforceEverywhere": true
  },
  "forbidden": {
    "functions": ["print(", "console.log("],
    "modules": ["subprocess", "os.system"],
    "hardcodedStrings": true,
    "hardcodedNumbers": true,
    "hardcodedUrls": true,
    "hardcodedRegex": true
  },
  "externalization": {
    "textsPath": "data/texts/*.yml",
    "configPath": "data/config/*.yml",
    "enforceNoHardcodedStrings": true,
    "enforceNoHardcodedNumbers": true,
    "allConfigFromYaml": true
  },
  "architecture": {
    "maxFileLines": 300,
    "modularOnly": true,
    "separationOfConcerns": true
  },
  "i18n": {
    "logsLanguage": "en",
    "uiLanguage": "fa",
    "enforceLogLanguage": true,
    "enforceUiLanguage": true
  },
  "quality": {
    "minCoverage": 80,
    "requireTests": true,
    "requireDocs": true,
    "scoreThreshold": 100,
    "zeroTolerance": true
  },
  "validation": {
    "preGeneration": {
      "acknowledgmentRequired": true,
      "explicitRulesCheck": true
    },
    "postGeneration": {
      "selfAssessmentRequired": true,
      "evidenceRequired": true,
      "validationCommands": [
        "wc -l main.py",
        "grep -r 'print(' app/",
        "grep -r '\".*\"' app/ | wc -l",
        "find . -name '*.py' -exec wc -l {} \\;"
      ]
    },
    "scoring": {
      "totalRules": 10,
      "passingScore": 10,
      "failureAction": "REJECT_AND_REWRITE"
    }
  },
  "deliverables": {
    "required": [
      "Pre-Generation Acknowledgment",
      "Generated Code",
      "Self-Assessment Table",
      "Validation Commands Output",
      "Final Verdict (PASS/FAIL)"
    ],
    "onlyLoggingAllowed": true,
    "description": "Use logging module only; console in English, chat in Persian"
  },
  "apiIntegration": {
    "preferredProviders": ["ollama", "openai", "claude"],
    "fallbackBehavior": "graceful",
    "timeoutMs": 30000
  }
}
